---
publishDate: 2024-11-03T00:00:00Z
title: Subiendo versi칩n de Angular (11 a 18) en la aplicaci칩n de los Techos de Asturias
excerpt: Mejoras logradas y retos pendientes
image: ~/assets/images/blog/angular-techos-asturias.webp
tags:
  - Angular
  - migraci칩n
  - Techos de Asturias
---

A finales de 2020, aprovechando algo de tiempo libre que me surgi칩 y con la idea b치sica de mejorar la versi칩n anterior, empec칠 a trabajar con la aplicaci칩n de los Techos de Asturias. En aquel momento estaba trabajando con Angular, por lo que me pareci칩 buena idea desarrollarla tambi칠n con este framework para poder experimentar con ideas y librer칤as que poder aplicar posteriormente al 치mbito profesional. En aquel momento la versi칩n del framework era la 11.

Dada la sencillez de la aplicaci칩n todo fue bastante r치pido y en unas semanas ten칤a publicada la aplicaci칩n que, aparte de Angular utilizaba:

- Ng-Bootstrap como librer칤a de componentes
- Akita como librer칤a para la gesti칩n del estado

A partir de ese primer desarrollo inicial y aunque quedaron bastantes ideas pendientes, fui dejando el proyecto y solamente sub칤a alguna foto de los picos que consegu칤a fotografiar para ir completando el listado. Este a침o he vuelto a tener algo de tiempo libre y me he planteado retomar el desarrollo, pero no ten칤a sentido trabajar sobre una versi칩n ya tan obsoleta del framework, como veremos m치s tarde, por lo que el primer paso ser칤a realizar la migraci칩n de la versi칩n de Angular 11 original a la 18 actual... 춰Si era posible! A continuaci칩n muestro algunas conclusiones, no un manual paso a paso ya que la documentaci칩n de Angular es bastante 칰til en este sentido.

## 쯇or qu칠 es importante actualizar a una nueva versi칩n de Angular (o de cualquier framework en general)?

Por si hay alg칰n Product Owner despistado que est칠 leyendo esto y pensando "subir de versi칩n la tecnolog칤a no aporta valor al usuario" voy a resumir los principales motivos por los que no puede estar m치s equivocado:

- Seguridad: en cada iteraci칩n de Angular se van reduciendo las vulnerabilidades detectadas en las anteriores. No es nueva funcionalidad, pero s칤 es valor.
- Rendimiento: sobre todo con la introducci칩n del motor Ivy la mejora de la rapidez con que carga la aplicaci칩n es muy apreciable. Esto es muy importante en las SPA ya que estamos enviando todos los recursos y proces치ndolos para esa carga inicial y es en las posteriores interacciones donde veremos la ventaja del enfoque. Valor puro y duro.
- Compatibilidad de dependencias: 쯤u칠 pasa si tengo una dependencia y se descubre una vulnerabilidad en ella, pero la versi칩n que la corrige no est치 disponible para la versi칩n del framework que estoy utilizando?
- Nuevas caracter칤sticas: si vamos a hacer cambios futuros, siempre nos ser치 m치s f치cil hacerlo con la versi칩n m치s reciente, consultando la documentaci칩n actualizada y exprimiendo hasta la 칰ltima gota el framework.

## Migraci칩n de dependencias: ng-bootstrap

Ng-bootstrap es una librer칤a de componentes de Bootstrap desarrollada y soportada por el equipo de Angular. Una apuesta segura. Sab칤a por el dise침o que iba a necesitar barras de progreso y alertas, por lo que estaba cubierto. Se trata de un desarrollo que se toman muy en serio por lo que cuando lo escog칤 entend칤 que no iba a tener problemas para que siguiera teniendo soporte con el tiempo. Y as칤 fue.

La versi칩n compatible con Angular 11 era la 9 y pude subir de versi칩n f치cilmente hasta la 12. La versi칩n 13 ya supon칤a una migraci칩n de Bootstrap a su versi칩n 5 por lo que requer칤a mayor atenci칩n.

Con Angular 13 pude mantener ng-bootstrap en su versi칩n 11 aunque ya con warnings y, aunque era posible hacer el build en local la github action de despliegue fallaba.

Para subir a Angular 14 fue necesario subir la versi칩n de Bootstrap a la 5 y de esa manera pude subir la versi칩n de ng-bootstrap. Por el medio, algunos estilos no muy relevantes dejaron de funcionar, pero prefer칤 dejarlo para m치s adelante con el fin de no detener la migraci칩n. Ya tendr칤a tiempo al final para arreglar el grano fino.

A partir de subir la versi칩n de Bootstrap a la 5 y actualizar ng-bootstrap en consecuencia no volv칤 a tener ning칰n problema con la Github action de despliegue, tal y como cabe esperar en un proyecto con un buen soporte por parte de sus desarrolladores. Justo lo contrario de lo que me iba a suceder con la gesti칩n del estado...

## Migraci칩n de dependencias: Akita

Cuando plante칠 originalmente la aplicaci칩n quer칤a experimentar con la gesti칩n del estado pero me parec칤a que la soluci칩n m치s habitual, Redux, era demasiado pesada para un proyecto tan sencillo. Lo que hice fue investigar alternativas y, en aquel entonces, la m치s aceptada era Akita, una librer칤a sencilla y ligera para la gesti칩n del estado.

Al ponerme con la migraci칩n entro en la p치gina de Github del proyecto y dice lo siguiente: "THE LIBRARY IS NOT MAINTAINED ANYMORE - DON'T USE IT
Elf, a newer state management solution, has been published. We recommend checking it out". Siendo realistas cab칤a pensar que esto pod칤a pasar al tratarse de un proyecto bastante peque침o. Lo peor no es eso, sino que desoyendo los consejos de Uncle Bob no hubiese retrasado la decisi칩n todo lo posible como un buen arquitecto software deber칤a hacer: todo el c칩digo de la aplicaci칩n est치 atado a la librer칤a en lugar de haber creado una abstracci칩n intermedia que facilitase el cambio a otra soluci칩n para la gesti칩n del estado.

Lecci칩n aprendida. Pero mientras tanto tengo una migraci칩n que resolver. Por suerte, es posible subir versi칩n a la 칰tima versi칩n de Angular con la 칰ltima versi칩n de Akita a칰n. A ver durante cu치nto tiempo.

## Conclusi칩n

Como conclusi칩n, podr칤amos decir que las migraciones son importantes y necesarias, y nos acabar치n surgiendo siempre. Por ello es importante la elecci칩n de dependencias que hagamos durante la fase inicial de los proyectos as칤 como su acomodo a nivel arquitect칩nico al proyecto. No obstante, si has tomado una mala decisi칩n, no es el fin del mundo, se trata de m치s deuda t칠cnica a gestionar. Y aunque no gestionar sea una manera de gestionar, para un buen arquitecto de software no es una soluci칩n 游땔. En mi caso, lo mejor que podr칤a hacer antes de continuar con el desarrollo de nuevas funcionalidades en el proyecto no es cambiar la librer칤a por otra sino reducir el acoplamiento con Akita y, a partir de ah칤 decidir si continuar con Akita mientras aguante o si dar el paso a una alternativa. Seguiremos informando.